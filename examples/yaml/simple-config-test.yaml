apiVersion: hexdag.omniviser.io/v1alpha1
kind: Pipeline
metadata:
  name: simple-config-test
  description: Simple test pipeline to validate configuration system
  version: "1.0.0"

spec:
  # Global ports - native YAML dict format
  ports:
    observer_manager:
      namespace: plugin
      name: local_observer_manager
    policy_manager:
      namespace: plugin
      name: local_policy_manager

  # Global policies - native YAML dict format
  policies:
    retry:
      name: retry
      params:
        max_retries: 3
    timeout:
      name: timeout
      params:
        timeout_seconds: 300

  # Nodes
  nodes:
    - kind: core:function_node
      metadata:
        name: step1
        description: First step
      spec:
        fn: passthrough
        dependencies: []

    - kind: core:function_node
      metadata:
        name: step2
        description: Second step
      spec:
        fn: passthrough
        dependencies:
          - step1
